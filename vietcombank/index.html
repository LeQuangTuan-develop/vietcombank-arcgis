<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Vietcombank Tower</title>

<style>
html, body, #viewDiv {
	padding: 0;
	margin: 0;
	height: 100%;
	width: 100%;
}

</style>

<link rel="stylesheet"
	href="https://js.arcgis.com/4.29/esri/themes/light/main.css" />
<script src="https://js.arcgis.com/4.29/"></script>

<script>
        require([
            "esri/Map",
            "esri/views/SceneView",
            "esri/layers/GeoJSONLayer",
            "esri/layers/SceneLayer", 
			"esri/layers/GraphicsLayer", 
			"esri/geometry/Mesh",
			"esri/geometry/Point",
			"esri/Graphic", 
			"esri/request",
			
        ], function (Map, SceneView, GeoJSONLayer, SceneLayer,
                     GraphicsLayer, Mesh, Point, Graphic, esriRequest) {
        	var createGraphic = function(data) {
    			return new Graphic({
    				geometry : data,
    				symbol : data.symbol,
    				attributes : data,
    				popupTemplate : data.popupTemplate
    			});
    		};
					
    		
    		const json_options = {
    				query : {
    					f : "json"
    				},
    				responseType : "json"
    			};
			// request json
			esriRequest('./data.json', json_options).then(function(response) {
				var graphicsLayer = new GraphicsLayer();
				console.log(response);
				response.data.forEach(function(data){
					graphicsLayer.add(createGraphic(data));
				});
				map.add(graphicsLayer);

				const car = new Point({
                x: 106.7059979707848,
                y: 10.775723205539034,
                z: 10.2,
            })

			Mesh.createFromGLTF(car, "./mesh/porsche_gt3_rs.glb")
			.then(function (geometry) {
				geometry.scale(3, { origin: car })
				geometry.rotate(0, 0, 203);
				const graphic = new Graphic({
					geometry,
					symbol: {
						type: "mesh-3d",
						symbolLayers: [{
							type: "fill",
							size: 10000
						}]
					}
				});
				sketchLayer.add(graphic)
			})
			.catch(console.error);
		
		map.add(sketchLayer);

			});
			// geojson layer
			const layer1 = new GeoJSONLayer({
				url: "./layer/layer1.geojson"
			});
			
			layer1.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 2,
							material: {
                            color: [135,206,250,0.8],
                            },
                            edges: {
                                type: "solid",
                                color: [0, 0, 0, 0.6],
                            }
						}
					]
				}
			};       
			
			// geojson layer
			const layer2 = new GeoJSONLayer({
				url: "./layer/layer2.geojson"
			});
			
			layer2.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 2,
							material: {
                            color: [135,206,250,0.8],
                            },
                            edges: {
                                type: "solid",
                                color: [0, 0, 0, 0.6],
                            }
						}
					]
				}
			}; 
			
			// geojson layer
			const layer3 = new GeoJSONLayer({
				url: "./layer/layer3.geojson"
			});
			
			layer3.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 2,
							material: {
                            color: [135,206,250,0.8],
                            },
                            edges: {
                                type: "solid",
                                color: [0, 0, 0, 0.6],
                            }
						}
					]
				}
			};         
			
			// geojson layer
			const layer4 = new GeoJSONLayer({
				url: "./layer/layer4.geojson"
			});
			
			layer4.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 2,
							material: {
                            color: [135,206,250,0.8],
                            },
                            edges: {
                                type: "solid",
                                color: [0, 0, 0, 0.6],
                            }
						}
					]
				}
			};   
			
			// geojson layer
			const layer5 = new GeoJSONLayer({
				url: "./layer/layer5.geojson"
			});
			
			layer5.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 2,
							material: {
                            color: [135,206,250,0.8],
                            },
                            edges: {
                                type: "solid",
                                color: [0, 0, 0, 0.6],
                            }
						}
					]
				}
			};         
			
			// geojson layer
			const layer6 = new GeoJSONLayer({
				url: "./layer/layer6.geojson"
			});
			
			layer6.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 2,
							material: {
                            color: [135,206,250,0.8],
                            },
                            edges: {
                                type: "solid",
                                color: [0, 0, 0, 0.6],
                            }
						}
					]
				}
			};         
			
			
            // geojson layer tầng 3
			const cua_so_ngang_truoc = new GeoJSONLayer({
				url: "./cuaSoNgang/mat_truoc.geojson"
			});
			
			cua_so_ngang_truoc.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							size: 0.2,
							type: "extrude",
							material: {
								color: [255, 255, 255, 1]
							}
						}
					]
				}
			};      
          

           

            // geojson layer chóp
			const chop = new GeoJSONLayer({
				url: "./layer/chop.geojson"
			});
			
			chop.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 40,
							material: {
								color: [255, 255, 255],
							}
						}
					]
				}
			};   


            // front window
        const frontWindowGeojsonLayer = new GeoJSONLayer({
            url: "./cuaSo/frontWindow.geojson"
        });

        frontWindowGeojsonLayer.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 80,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }

        };

		   // front window
		const mat_trai = new GeoJSONLayer({
			url: "./cuaSo/mat_trai.geojson"
        });

        mat_trai.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 30,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }

        };

				   // front window
		const mat_sau_trai = new GeoJSONLayer({
            url: "./cuaSo/mat_sau_trai.geojson"
        });

        mat_sau_trai.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 30,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }

        };

		// front window
		const mat_sau_phai = new GeoJSONLayer({
			url: "./cuaSo/mat_sau_phai.geojson"
        });

        mat_sau_phai.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 30,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_phai = new GeoJSONLayer({
			url: "./cuaSo/mat_phai.geojson"
        });

        mat_phai.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 30,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_phai_1 = new GeoJSONLayer({
			url: "./cuaSo/mat_phai_1.geojson"
        });

        mat_phai_1.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 50,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_sau_phai_1 = new GeoJSONLayer({
			url: "./cuaSo/mat_sau_phai_1.geojson"
        });

        mat_sau_phai_1.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 50,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_sau_trai_1 = new GeoJSONLayer({
			url: "./cuaSo/mat_sau_trai_1.geojson"
        });

        mat_sau_trai_1.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 50,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_trai_1 = new GeoJSONLayer({
			url: "./cuaSo/mat_trai_1.geojson"
        });

        mat_trai_1.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 50,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_trai_2 = new GeoJSONLayer({
			url: "./cuaSo/mat_trai_2.geojson"
        });

        mat_trai_2.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 20,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_sau_trai_2 = new GeoJSONLayer({
			url: "./cuaSo/mat_sau_trai_2.geojson"
        });

        mat_sau_trai_2.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 20,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_sau_phai_2 = new GeoJSONLayer({
			url: "./cuaSo/mat_sau_phai_2.geojson"
        });

        mat_sau_phai_2.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 20,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_phai_2 = new GeoJSONLayer({
			url: "./cuaSo/mat_phai_2.geojson"
        });

        mat_phai_2.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 20,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_phai_3 = new GeoJSONLayer({
			url: "./cuaSo/mat_phai_3.geojson"
        });

        mat_phai_3.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 20,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_trai_3 = new GeoJSONLayer({
			url: "./cuaSo/mat_trai_3.geojson"
        });

        mat_trai_3.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 20,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_sau_trai_3 = new GeoJSONLayer({
			url: "./cuaSo/mat_sau_trai_3.geojson"
        });

        mat_sau_trai_3.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 20,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mat_sau_phai_3 = new GeoJSONLayer({
			url: "./cuaSo/mat_sau_phai_3.geojson"
        });

        mat_sau_phai_3.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 20,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mep_phai = new GeoJSONLayer({
			url: "./cuaSo/mep_phai.geojson"
        });

        mep_phai.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 60,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mep_trai = new GeoJSONLayer({
			url: "./cuaSo/mep_trai.geojson"
        });

        mep_trai.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 60,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mep_phai_1 = new GeoJSONLayer({
			url: "./cuaSo/mep_phai_1.geojson"
        });

        mep_phai_1.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 80,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

        const mat_phai_block_cuoi_1 = new GeoJSONLayer({
			url: "./cuaSo/mat_phai_block_cuoi_1.geojson"
        });

        mat_phai_block_cuoi_1.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 16,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

        const mat_trong_block_cuoi_1 = new GeoJSONLayer({
			url: "./cuaSo/mat_trong_block_cuoi_1.geojson"
        });

        mat_trong_block_cuoi_1.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 16,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

        const mat_trai_block_cuoi_1 = new GeoJSONLayer({
			url: "./cuaSo/mat_trai_block_cuoi_1.geojson"
        });

        mat_trai_block_cuoi_1.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 16,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const mep_trai_1 = new GeoJSONLayer({
			url: "./cuaSo/mep_trai_1.geojson"
        });

        mep_trai_1.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 80,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

		const topBarGeojsonLayer = new GeoJSONLayer({
            url: "./topBar.geojson"
        });

        topBarGeojsonLayer.renderer = {
            type: "simple",
            symbol: {
                type: "polygon-3d",
                symbolLayers: [
                    {
                        type: "extrude",
                        size: 2,
                        material: {
                            color: [255, 255, 255, 1]
                        }
                    }
                ]
            }
        };

            // Column
        const geojsonLayera = new GeoJSONLayer({
            url: "./tru/tru.geojson"
        });
        const geojsonLayer1 = new GeoJSONLayer({
            url: "./tru/tru1.geojson"
        });
        const geojsonLayer2 = new GeoJSONLayer({
            url: "./tru/tru2.geojson"
        });
        const geojsonLayer3 = new GeoJSONLayer({
            url: "./tru/tru3.geojson"
        });
        const geojsonLayer4 = new GeoJSONLayer({
            url: "./tru/tru4.geojson"
        });
        const geojsonLayer5 = new GeoJSONLayer({
            url: "./tru/tru5.geojson"
        });

        [
            geojsonLayera,
            geojsonLayer1,
            geojsonLayer2,
            geojsonLayer3,
            geojsonLayer4,
            geojsonLayer5,
        ].forEach(function(layer){
            layer.renderer = {
                type: "simple",
                symbol: {
                    type: "polygon-3d",
                    symbolLayers: [
                        {
                            type: "extrude",
                            size: 20,
                            material: {
                                color: [255, 255, 255, 1]
                            },
                        }
                    ]
                }
            };
        });


		const sketchLayer = new GraphicsLayer({
          elevationInfo: {
            mode: "absolute-height"
          },
          title: "Sketched geometries"
        });
	
			const map = new Map({
                basemap: "topo-vector",
                ground: "world-elevation",
                layers: [
				geojsonLayera,
                geojsonLayer1,
                geojsonLayer2,
                geojsonLayer3,
                geojsonLayer4,
                geojsonLayer5,
				layer1,
				layer2,
				layer3,
				layer4,
				layer5,
				layer6,
				cua_so_ngang_truoc,
				chop,
				frontWindowGeojsonLayer,
				mat_trai,
				mat_sau_trai,
				mat_sau_phai,
				mat_phai,
				mat_phai_1,
				mat_sau_phai_1,
				mat_sau_trai_1,
				mat_trai_1,
				mat_trai_2,
				mat_sau_trai_2,
				mat_sau_phai_2,
				mat_phai_2,
				mat_phai_3,
				mat_trai_3,
				mat_sau_trai_3,
				mat_sau_phai_3,
				mep_phai,
				mep_trai,
				mep_phai_1,
				mep_trai_1,
				mat_phai_block_cuoi_1,
                mat_trong_block_cuoi_1,
                mat_trai_block_cuoi_1,
					topBarGeojsonLayer,
				] //end layers
            });

            const view = new SceneView({
                container: "viewDiv",
                map: map,
                camera: {
					position: [106.71136192926946, 10.774846802858049, 300],
					heading: -80,
					tilt: 75
                }
            });
            view.popup.defaultPopupTemplateEnabled = true;
        });

    </script>
</head>

<body>
	<div id="viewDiv"></div>
</body>
</html>